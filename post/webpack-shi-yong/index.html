<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
<title>
    Exclison
</title>
<!--[if lt IE 9]><script src="//cdn.bootcss.com/html5shiv/r29/html5.js"></script><![endif]-->
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<meta name="author" content="Exclison">
<meta name="description" content="Exclison Blogs">
<meta name="keywords" content="javascript,webpack,vue,node">
<script async src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
<link rel="stylesheet" href="https://exclison.github.io/styles/main.css" />
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/1.7.1/jquery.min.js"></script>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/css/style.min.css" />
        <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/tocbot.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/script.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/icon.min.js"></script>
        
            <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/Card/prism.min.js"></script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/css/Card/prism.min.css" />
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css">
            <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js"></script>
            
                            <script>
                                (function() {
                                    var bp = document.createElement('script');
                                    var curProtocol = window.location.protocol.split(':')[0];
                                    if (curProtocol === 'https') {
                                        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                                    } else {
                                        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                                    }
                                    var s = document.getElementsByTagName("script")[0];
                                    s.parentNode.insertBefore(bp, s);
                                })();
                            </script>
                            
</head>

<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo">
                <a href="https://exclison.github.io">
                    Exclison
                </a>
            </div>
            <div id="tp-weather-widget"></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/">
                        首页
                    </a>
                    
                    <a class="menu-item" href="/archives">
                        文章
                    </a>
                    
                    <a class="menu-item" href="/tags">
                        标签
                    </a>
                    
                    <a class="menu-item" href="/post/about">
                        关于
                    </a>
                    
                        <input id="switch_default" type="checkbox" class="switch_default">
                        <label for="switch_default" class="toggleBtn"></label>
            </div>
            <form id="gridea-search-form" data-update="1600658333988" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
            </form>
        </div>
    </nav>

    
        <nav class="navbar-mobile" id="nav-mobile">
            <div class="container">
                <div class="navbar-header">
                    <div>
                        <a href="https://exclison.github.io">
                            Exclison
                        </a>
                        <!--en-->
                        <a id="mobile-toggle-theme-en" class="a en">&nbsp;Dark</a>
                        <!--zh-->
                        <a id="mobile-toggle-theme-zh" class="a zh">&nbsp;&#x6697;&#x9ED1;</a>
                    </div>
                    <form id="gridea-search-form" data-update="1600658333988" action="/search/index.html">
                        <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
                    </form>
                    <!--en-->
                    <div class="menu-toggle" id="menu-toggle-en" onclick="mobileBtn()">&#9776; Menu</div>
                    <!--zh-->
                    <div class="menu-toggle" id="menu-toggle-zh" onclick="mobileBtn()">&#9776; &#x83DC;&#x5355;</div>

                </div>
                <div class="menu" id="mobile-menu">
                    
                        <a class="menu-item" href="/">
                            首页
                        </a>
                        
                        <a class="menu-item" href="/archives">
                            文章
                        </a>
                        
                        <a class="menu-item" href="/tags">
                            标签
                        </a>
                        
                        <a class="menu-item" href="/post/about">
                            关于
                        </a>
                        
                </div>
            </div>
        </nav>
</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementById("menu-toggle-en");
        var toggleMenu_zh = document.getElementById("menu-toggle-zh");

        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.display != "none") {
            if (toggleMenu.classList.contains("active")) {
                toggleMenu.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu.classList.add("active")
                mobileMenu.classList.add("active")
            }
        } else if (toggleMenu_zh.display != "none") {
            if (toggleMenu_zh.classList.contains("active")) {
                toggleMenu_zh.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu_zh.classList.add("active")
                mobileMenu.classList.add("active")
            }
        }

    }
</script>

            <div class="main">
                <div class="container">
                    <article class="post-wrap">
                        <header class="post-header">
                            <h1 class="post-title">
                                Webpack使用
                            </h1>
                            
                                    <!--zh-->
                                    <div class="post-meta zh">
                                        &#x4F5C;&#x8005;:
                                        <a itemprop="author" rel="author" href="/">
                                            Exclison
                                        </a>
                                        <span class="post-time">&#x65E5;&#x671F;: <a href="#">2020-09-19</a></span>
                                        <span class="post-readtime">&#x9605;&#x8BFB;&#x65F6;&#x95F4;:<a
                                    href="#">10.8
                                    &#x5206;&#x949F;</a></span>
                                        <span class="post-words">&#x5B57;&#x6570;:<a href="#">1940</a></span>
                                        
                                    </div>
                                    
                        </header>
                        
                        <div class="post-content">
                            <h5 id="1项目初始化">1.项目初始化</h5>
<pre><code>npm init
</code></pre>
<h5 id="2安装webpack">2.安装webpack</h5>
<pre><code>npm i webpack webpack-dev-server
</code></pre>
<h5 id="3创建配置文件">3.创建配置文件</h5>
<pre><code class="language-text">//项目文档结构
web
├─package-lock.json
├─package.json
├─src
|  └main.js
├─scripts // 构建脚本文件夹
|    ├─dev.js //开发环境构建脚本
|    ├─prod.js //生产环境构建脚本
|    ├─config // 构建脚本配置文件夹
|    |   ├─index.js // webpack配置文件 导出开发与生产配置函数
|    |   ├─util.js // 导出工具函数
|    |   ├─plugin // 封装插件文件夹
|    |   |   └index.js
|    |   ├─loader // 封装loaders文件夹
|    |   |   └index.js
├─public
|   └index.html // html模板
├─dist // 打包输出路径
</code></pre>
<h5 id="4loaders">4.loaders</h5>
<p><font color=#0089ff>注意:第4,第5步为常用loader和plugin介绍</font></p>
<ul>
<li>
<p>thread-loader</p>
<pre><code class="language-javascript">//安装 使用时，需将此 loader 放置在其他 loader 之前。放置在此 loader 之后的 loader 会在一个独立的 worker 池中运行
npm install --save-dev thread-loader

//webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.js$/,
        include: path.resolve(&quot;src&quot;),
        use: [
          &quot;thread-loader&quot;,
          // 耗时的 loader （例如 babel-loader）
        ]
      }
    ]
  }
}

</code></pre>
</li>
<li>
<p>babel-loader</p>
<pre><code class="language-javascript">//当前演示webpack使用方法 其他参照babel官网
//安装
npm install --save-dev babel-loader @babel/core

//webpack.config.js
module: {
  rules: [
    { test: /\.js$/, exclude: /node_modules/, loader: &quot;babel-loader&quot; }
  ]
}

//创建 .babelrc 配置文件
//安装插件 使用转换 ES2015+ 的 env preset 
npm install @babel/preset-env --save-dev 

//.babelrc
{
  &quot;presets&quot;: [&quot;@babel/preset-env&quot;]
}
</code></pre>
</li>
<li>
<p>eslint-loader</p>
<pre><code class="language-javascript">//安装
npm install eslint --save-dev //安装eslint
npm install eslint-loader --save-dev //安装eslint-loader

//webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: ['babel-loader', 'eslint-loader'],
      },
    ],
  },
};



</code></pre>
</li>
<li>
<p>style-loader</p>
<pre><code class="language-javascript">//安装
npm install --save-dev style-loader
//webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/i,
        use: ['style-loader', 'css-loader'],
      },
    ],
  },
};

</code></pre>
</li>
<li>
<p>css-loader</p>
<pre><code class="language-javascript">//安装
npm install --save-dev css-loader

//webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/i,
        use: ['style-loader', 'css-loader'],
      },
    ],
  },
};
</code></pre>
</li>
<li>
<p>postcss-loader</p>
<pre><code class="language-javascript">npm i -D postcss-loader

//postcss.config.js
module.exports = {
  parser: 'sugarss',
  plugins: {
    'postcss-import': {},
    'postcss-cssnext': {},
    'cssnano': {}
  }
}
//webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [ 'style-loader', 'postcss-loader' ]
      }
    ]
  }
}
</code></pre>
</li>
<li>
<p>less-loader</p>
<pre><code class="language-javascript">//安装
npm install --save-dev less-loader less

// webpack.config.js
module.exports = {
    ...
    module: {
        rules: [{
            test: /\.less$/,
            use: [{
                loader: &quot;style-loader&quot; // creates style nodes from JS strings
            }, {
                loader: &quot;css-loader&quot; // translates CSS into CommonJS
            }, {
                loader: &quot;less-loader&quot; // compiles Less to CSS
            }]
        }]
    }
};
</code></pre>
</li>
<li>
<p>Sass-loader</p>
<pre><code class="language-javascript">npm install sass-loader node-sass webpack --save-dev
// webpack.config.js
module.exports = {
  ...
  module: {
    rules: [{
      test: /\.scss$/,
      use: [{
          loader: &quot;style-loader&quot; // 将 JS 字符串生成为 style 节点
      }, {
          loader: &quot;css-loader&quot; // 将 CSS 转化成 CommonJS 模块
      }, {
          loader: &quot;sass-loader&quot; // 将 Sass 编译成 CSS
      }]
    }]
  }
};
</code></pre>
</li>
<li>
<p>Vue-loader</p>
<pre><code class="language-javascript">//安装
npm install -D vue-loader vue-template-compiler

// webpack.config.js
const VueLoaderPlugin = require('vue-loader/lib/plugin')

module.exports = {
  module: {
    rules: [
      // ... 其它规则
      {
        test: /\.vue$/,
        loader: 'vue-loader'
      }
    ]
  },
  plugins: [
    // 请确保引入这个插件！
    new VueLoaderPlugin()
  ]
}
</code></pre>
</li>
<li>
<p>Url-loader</p>
<pre><code class="language-javascript">//安装
npm install --save-dev url-loader

module.exports = {
  module: {
    rules: [
      {
        test: /\.(png|jpg|gif)$/,
        use: [
          {
            loader: 'url-loader',
            options: {
              limit: 8192
            }
          }
        ]
      }
    ]
  }
}
</code></pre>
</li>
<li>
<p>File-loader</p>
<pre><code class="language-javascript">//安装
npm install --save-dev file-loader

module.exports = {
  module: {
    rules: [
      {
        test: /\.(png|jpg|gif)$/,
        use: [
          {
            loader: 'file-loader',
            options: {}
          }
        ]
      }
    ]
  }
}
</code></pre>
</li>
</ul>
<h5 id="5plugins">5.plugins</h5>
<ul>
<li>
<p>mini-css-extract-plugin</p>
<pre><code class="language-javascript">//安装
npm install --save-dev mini-css-extract-plugin

//webpack.config.js
const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
  plugins: [new MiniCssExtractPlugin()],
  module: {
    rules: [
      {
        test: /\.css$/i,
        use: [MiniCssExtractPlugin.loader, 'css-loader'],
      },
    ],
  },
};
Options

</code></pre>
</li>
<li>
<p>html-webpack-plugin</p>
<pre><code class="language-javascript">//安装
npm install --save-dev html-webpack-plugin

var HtmlWebpackPlugin = require('html-webpack-plugin');
var path = require('path');

var webpackConfig = {
  entry: 'index.js',
  output: {
    path: path.resolve(__dirname, './dist'),
    filename: 'index_bundle.js'
  },
  plugins: [new HtmlWebpackPlugin()]
};
</code></pre>
</li>
<li>
<p>clean-webpack-plugin</p>
<pre><code class="language-javascript">const { CleanWebpackPlugin } = require('clean-webpack-plugin');
 
const webpackConfig = {
    plugins: [
        /**
         * All files inside webpack's output.path directory will be removed once, but the
         * directory itself will not be. If using webpack 4+'s default configuration,
         * everything under &lt;PROJECT_DIR&gt;/dist/ will be removed.
         * Use cleanOnceBeforeBuildPatterns to override this behavior.
         *
         * During rebuilds, all webpack assets that are not used anymore
         * will be removed automatically.
         *
         * See `Options and Defaults` for information
         */
        new CleanWebpackPlugin(),
    ],
};
 
module.exports = webpackConfig;
</code></pre>
</li>
<li>
<p>optimize-css-assets-webpack-plugin</p>
<pre><code class="language-javascript">npm install --save-dev optimize-css-assets-webpack-plugin

var OptimizeCssAssetsPlugin = require('optimize-css-assets-webpack-plugin');
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        loader: ExtractTextPlugin.extract('style-loader', 'css-loader')
      }
    ]
  },
  plugins: [
    new ExtractTextPlugin('styles.css'),
    new OptimizeCssAssetsPlugin({
      assetNameRegExp: /\.optimize\.css$/g,
      cssProcessor: require('cssnano'),
      cssProcessorPluginOptions: {
        preset: ['default', { discardComments: { removeAll: true } }],
      },
      canPrint: true
    })
  ]
};
</code></pre>
</li>
<li>
<p>terser-webpack-plugin</p>
<pre><code class="language-javascript">npm install terser-webpack-plugin --save-dev

const TerserPlugin = require('terser-webpack-plugin');
 
module.exports = {
  optimization: {
    minimize: true,
    minimizer: [new TerserPlugin()],
  },
};
</code></pre>
</li>
<li>
<p>HotModuleReplacementPlugin</p>
<pre><code class="language-javascript">const { HotModuleReplacementPlugin } = require('webpack');

const webpackConfig = {
    plugins: [
        new HotModuleReplacementPlugin();
    ],
};
 
module.exports = webpackConfig;

</code></pre>
<h5 id=""></h5>
</li>
</ul>
<h5 id="6环境构建">6.环境构建</h5>
<ul>
<li>
<p>开发环境</p>
<pre><code class="language-javascript">//使用nodeAPI构建开发环境
// ./scripts/dev.js
const Webpack = require(&quot;webpack&quot;);
const WebpackDevServer = require(&quot;webpack-dev-server&quot;);
const { getDevConfig } = require(&quot;./config&quot;);
const webpackConfig = getDevConfig();

const compiler = Webpack(webpackConfig);
const devServerOptions = Object.assign({}, webpackConfig.devServer, {
  historyApiFallback: true,
  open: true,
  hot: true,
  inline: true,
  stats: &quot;errors-warnings&quot;,
  overlay: {
    // 浏览器全屏显示错误
    errors: true,
    warnings: false,
  },
  stats: {
    colors: true,
  },
});
const server = new WebpackDevServer(compiler, devServerOptions);

server.listen(8087, &quot;127.0.0.1&quot;, () =&gt; {
  console.log(&quot;Starting server on http://localhost:8087&quot;);
});

</code></pre>
</li>
<li>
<p>生产环境</p>
<pre><code class="language-javascript">//使用nodeAPI构建生产环境
// ./scripts/prod.js
const { getProdConfig } = require(&quot;./config&quot;);
const config = getProdConfig();

const webpack = require(&quot;webpack&quot;);

const compiler = webpack(config);

compiler.run((err, stats) =&gt; {
  const info = stats.toJson();

  if (err) {
    console.error(err.stack || err);
    if (err.details) {
      console.error(err.details);
    }
    return;
  }else if (stats.hasErrors()) {
    console.error(info.errors);
  }else if (stats.hasWarnings()) {
    console.warn(info.warnings);
  }else{
      console.log('build successfully')
      console.log([
        console.log(`Time: ${info.time}ms`),
        console.log(`output: ${info.outputPath}`),
        console.log(`webpack version: ${info.version}`),
      ].join('\n'))
  }
});

</code></pre>
</li>
</ul>
<h5 id="7补充代码">7.补充代码</h5>
<ul>
<li>
<p>将webpack配置文件以函数形式封装</p>
<pre><code class="language-javascript">// ./scripts/config/index.js
const {
  getJSLoader,
  getVueLoader,
  getCSSLoader,
  getLESSLoader,
  getSASSLoader,
  getAssetsLoader,
} = require(&quot;./loader&quot;);

const { 
  getVueLoaderPlugin,
  getHtmlWebpackPlugin,
  getStylePlugin,
  getMiniCssExtractPlugin,
  getTerserPlugin,
  getHotModuleReplacementPlugin,
 } = require(&quot;./plugin&quot;);

const { reslove } = require(&quot;./util&quot;);

function getCommonConfig () {
  return {
    entry: reslove(&quot;./src/main.js&quot;), // 入口文件
    resolve: {
      // 解析模块请求的选项
      // （不适用于对 loader 解析）

      extensions: [&quot;.js&quot;, &quot;.json&quot;, &quot;.jsx&quot;, &quot;.css&quot;],
      // 使用的扩展名

      alias: {
        // 模块别名列表
        &quot;@&quot;: reslove(&quot;./src&quot;),
      },
    },
  };
}

exports.getDevConfig = function () {
  const mode = &quot;development&quot;;

  const common = getCommonConfig();

  return Object.assign(common, {
    output: {
      path: reslove(&quot;./dist&quot;), //打包后的文件存放的地方
      filename: &quot;[name].[hash].js&quot;, //打包后输出文件的文件名
    },
    mode,
    module: {
      // 关于模块配置
      rules: [
        // 模块规则（配置 loader、解析器等选项）
        getJSLoader(mode),
        getVueLoader(mode),
        getCSSLoader(mode),
        getLESSLoader(mode),
        getSASSLoader(mode),
        ...getAssetsLoader(mode),
      ],
    },
    plugins: [
      getVueLoaderPlugin(),
      getHtmlWebpackPlugin({
        template:reslove('./public/index.html'),
        filename:'index.html',
        minify: {
          caseSensitive: false, // 是否大小写敏感
          collapseWhitespace: true, // 是否去除空格
          removeAttributeQuotes: true, // 去掉属性引用
          removeComments: true, // 去注释
        },
      }),
      getHotModuleReplacementPlugin(),
    ],
  });
}

exports.getProdConfig = function () {
  const mode = &quot;production&quot;;

  const common = getCommonConfig();

  return Object.assign(common, {
    output: {
      path: reslove(&quot;./dist&quot;), //打包后的文件存放的地方
      filename: &quot;[name].[chunkhash].js&quot;, //打包后输出文件的文件名
    },
    mode,
    module: {
      // 关于模块配置
      rules: [
        // 模块规则（配置 loader、解析器等选项）
        getJSLoader(mode),
        getVueLoader(mode),
        getCSSLoader(mode),
        getLESSLoader(mode),
        getSASSLoader(mode),
        ...getAssetsLoader(mode),
      ],
    },
    plugins: [
      getVueLoaderPlugin(),
      getHtmlWebpackPlugin({
        template:reslove('./public/index.html'),
        filename:'index.html',
        minify: {
          caseSensitive: false, // 是否大小写敏感
          collapseWhitespace: true, // 是否去除空格
          removeAttributeQuotes: true, // 去掉属性引用
          removeComments: true, // 去注释
        },
      }),
      getMiniCssExtractPlugin(),
      getStylePlugin(),
    ],
    optimization: {
      minimize: true,
      minimizer: [new getTerserPlugin()],
    },
  });
}

</code></pre>
</li>
<li>
<p>封装常用loaders</p>
<pre><code class="language-javascript">// ./scripts/config/loader/index.js
const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);
const eslintLoader = {
  loader: &quot;eslint-loader&quot;,
  options: {
    fix: true,
  },
};
exports.getJSLoader = function (mode) {
  const use = [
    &quot;thread-loader&quot;,
    {
      loader: &quot;babel-loader&quot;,
      options: {
        presets: [&quot;@babel/preset-env&quot;],
      },
    },
  ];

  mode === &quot;development&quot; &amp;&amp; use.push(eslintLoader);

  return {
    test: /\.js$/,
    use,
    exclude: /node_modules/,
  };
}

exports.getVueLoader = function (mode) {
  const use = [&quot;vue-loader&quot;];
  mode === &quot;development&quot; &amp;&amp; use.push(eslintLoader);

  return {
    test: /\.vue$/,
    use,
  };
}

exports.getCSSLoader = function (mode) {
  const use = [
    mode === &quot;development&quot; ? &quot;style-loader&quot; : MiniCssExtractPlugin.loader,
    &quot;css-loader&quot;,
    &quot;postcss-loader&quot;,
  ];

  return {
    test: /\.css$/i,
    use,
  };
}

exports.getLESSLoader = function (mode) {
  const use = [
    mode === &quot;development&quot; ? &quot;style-loader&quot; : MiniCssExtractPlugin.loader,
    &quot;css-loader&quot;,
    &quot;postcss-loader&quot;,
    &quot;less-loader&quot;,
  ];

  return {
    test: /\.less$/i,
    use,
  };
}
exports.getSASSLoader = function (mode) {
  const use = [
    mode === &quot;development&quot; ? &quot;style-loader&quot; : MiniCssExtractPlugin.loader,
    &quot;css-loader&quot;,
    &quot;postcss-loader&quot;,
    &quot;sass-loader&quot;,
  ];

  return {
    test: /\.less$/i,
    use,
  };
}
exports.getAssetsLoader = function (mode) {

    const name = mode === &quot;development&quot; ? &quot;[name].[ext]&quot; : &quot;[name].[contenthash].[ext]&quot;

    const imgReslove = {
        test: /\.(png|jpg|jpeg|svg|gif)$/,
        use: [
          {
            loader: &quot;url-loader&quot;,
            options: {
              name: `assets/images/${name}`,
              limit: 3 * 1024,
            },
          },
        ],
      }

    const mediaReslove = {
        test: /\.(mp4|avi|mp3|rmvb|wmv|flv|webm)$/,
        use: [
          {
            loader: &quot;file-loader&quot;,
            options: {
              name: `assets/media/${name}`,
            },
          },
        ],
      }

    const fontReslove = {
        test: /\.(woff2|woff|eot|ttf|otf)$/,
        use: [
          {
            loader: &quot;url-loader&quot;,
            options: {
              name: `assets/font/${name}`,
            },
          },
        ],
      }


  return [imgReslove,mediaReslove,fontReslove];
}

</code></pre>
</li>
<li>
<p>封装常用plugins</p>
<pre><code class="language-javascript">// ./scripts/config/plugins/index.js

const VueLoaderPlugin = require(&quot;vue-loader/lib/plugin&quot;);
const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);
const { CleanWebpackPlugin } = require(&quot;clean-webpack-plugin&quot;);
const OptimizeCssAssetsPlugin = require(&quot;optimize-css-assets-webpack-plugin&quot;);
const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);
const { HotModuleReplacementPlugin } = require('webpack');
const TerserPlugin = require('terser-webpack-plugin');

exports.getVueLoaderPlugin =  function () {
  return new VueLoaderPlugin();
}

exports.getHtmlWebpackPlugin = function (options) {
  return new HtmlWebpackPlugin(Object.assign({}, options));
}

exports.getCleanWebpackPlugin = function (options) {
  return new CleanWebpackPlugin(Object.assign({}, options));
}
exports.getStylePlugin = function (options) {
  return new OptimizeCssAssetsPlugin(
    Object.assign(
      {
        assetNameRegExp: /\.optimize\.css$/g,
        cssProcessor: require(&quot;cssnano&quot;),
        cssProcessorPluginOptions: {
          preset: [&quot;default&quot;, { discardComments: { removeAll: true } }],
        },
        canPrint: true,
      },
      options
    )
  );
}
exports.getMiniCssExtractPlugin = function (options) {
  return new MiniCssExtractPlugin(Object.assign({
    filename: 'assets/style/[name].[contenthash].css',
  }, options));
}
exports.getHotModuleReplacementPlugin = function () {
  return new HotModuleReplacementPlugin();
}
exports.getTerserPlugin = function (options) {
  return new TerserPlugin(
      Object.assign({
        cache: true, // 使用 cache，加快二次构建速度
        parallel: true, // 开启多线程
        extractComments: true,
        terserOptions: {
          compress: {
            unused: true,
            drop_debugger: true,
            drop_console: true,
            dead_code: true,
          },
        },
      },options)
  );
}

</code></pre>
</li>
<li>
<p>工具函数</p>
<pre><code class="language-javascript">// ./scripts/config/util.js
const path = require('path')

exports.reslove = function  (url){
    return path.resolve(__dirname,`../../${url}`)
}
</code></pre>
</li>
</ul>

                        </div>
                        
                            <div class="post-toc">
                                <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#1%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96">1.项目初始化</a></li>
<li><a href="#2%E5%AE%89%E8%A3%85webpack">2.安装webpack</a></li>
<li><a href="#3%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">3.创建配置文件</a></li>
<li><a href="#4loaders">4.loaders</a></li>
<li><a href="#5plugins">5.plugins</a></li>
<li></li>
<li><a href="#6%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA">6.环境构建</a></li>
<li><a href="#7%E8%A1%A5%E5%85%85%E4%BB%A3%E7%A0%81">7.补充代码</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

                            </div>
                            
                                
                                    
                                            <!--zh-->
                                            <section class="post-copyright zh">
                                                <p class="copyright-item ">
                                                    <span>&#x4F5C;&#x8005;:</span>
                                                    <span>Exclison</span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x6C38;&#x4E45;&#x94FE;&#x63A5;:</span>
                                                    <span><a href="https://exclison.github.io/post/webpack-shi-yong/">https://exclison.github.io/post/webpack-shi-yong/</a></span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x534F;&#x8BAE;:</span>
                                                    <span>MIT License</span>
                                                </p>
                                            </section>
                                            
                                                
                                                    
                                                                    <!--Share-->
                                                                    <span style="margin-right:15px">
                        <i class="post-share"></i>
                        <span>&#x5206;&#x4EAB;:</span>
                                                                    <a title="QR 码" target="_blank" href="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://exclison.github.io/post/webpack-shi-yong/"><i class="fa fa-qrcode"></i></a>
                                                                    <a title="QQ" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://exclison.github.io/post/webpack-shi-yong/&sharesource=qzone&title=Webpack使用&pics=https://exclison.github.io/images/avatar.png?v=1600658333988&summary="><i class="fa fa-qq"></i></a>
                                                                    <a title="新浪微博" target="_blank" href="https://service.weibo.com/share/share.php?url=https://exclison.github.io/post/webpack-shi-yong/&sharesource=weibo&title=Webpack使用 + " - " + &pic="https://exclison.github.io/images/avatar.png?v=1600658333988 "><i class="fa fa-weibo "></i></a>

                                                                    </span>
                                                                    
                                                                            <!--zh-->
                                                                            <section class="post-tags zh ">
                                                                                <div>
                                                                                    <span>&#x6807;&#x7B7E;:</span>
                                                                                    <span class="tag ">
                        
                                </span>
                                                                                </div>
                                                                                <div>
                                                                                    <a href="javascript:window.history.back();">
                        &#x8FD4;&#x56DE;</a>
                                                                                    <span>&dot;</span>
                                                                                    <a href="#">&#x4E3B;&#x9875;</a>
                                                                                </div>
                                                                            </section>

                                                                            
                                                                                <!---->
                                                                                <section class="post-nav">
                                                                                    
                                                                                        <a class="prev" rel="prev" href="https://exclison.github.io/post/webpack-pei-zhi-xiang-jie/">
                                                                                            Webpack配置详解
                                                                                        </a>
                                                                                        
                                                                                            
                                                                                                <a class="next" rel="next" href="https://exclison.github.io/post/es6-kuo-zhan-yun-suan-fu/">
                                                                                                    es6扩展运算符
                                                                                                </a>
                                                                                                
                                                                                </section>
                    </article>
                </div>
                
                                            
            </div>
    </div>
    </div>
    </div>
    
        <footer id="footer" class="footer">
            <div class="copyright">
                
                    <div class="Like">
                        <div class="tip" data-tooltip="Do you like it?">
                            <a href="https://github.com/ITJoker233/Gridea-theme-Chic" target="_blank" title=""><svg class="icon"
                        aria-hidden="true">
                        <use xlink:href="#like"></use>
                    </svg><b class="like_text" id="star"></b></a>
                        </div>
                    </div>
                    
                        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
                            
                                        <svg viewBox="0 0 1024 1024" style="margin-left: 5px;margin-right: 5px;" version="1.0" width="8" height="8" class="my-face">
            <path
                d="M863.597631 513.574282l-271.33965-140.213484L729.783667 81.926656c3.583731-7.87141 7.167462-15.742819 7.167462-25.214109C736.887134 25.226908 708.345275 0.012799 672.635953 0.012799a63.611229 63.611229 0 0 0-39.293053 12.607055c-1.791866 1.59988-3.519736 3.19976-5.311602 3.19976L147.87531 418.925381a55.547834 55.547834 0 0 0-19.646527 47.356448c1.791866 17.278704 14.27093 33.021523 32.125591 42.492813l271.33965 141.749369L292.504463 945.221908c-12.479064 25.214109-1.791866 53.563983 23.166262 69.306802 10.751194 6.335525 23.230258 9.47129 35.709322 9.47129 16.062795 0 32.125591-4.735645 44.604655-15.742819l480.091993-403.297753a55.547834 55.547834 0 0 0 19.646526-47.228458 61.243407 61.243407 0 0 0-32.12559-44.156688z"
                fill="#93b5cf"></path>
        </svg>
                                        Exclison &copy;Copyright
                                            <script>
                                                var date = new Date();
                                                document.write("" + date.getFullYear());
                                            </script>
                                            | Powered by
                                            <a href="https://coding.net" target="_blank">
                                                Coding.net
                                            </a>
            </div>
            <div id="update" style="display:none;">
                on
            </div>
            
                <div id="version" style="display:none;">
                    1.7.6
                </div>
                
                    <script>
                        var port = '';
                        
                        document.write('<div id="home_path" style="display:none;">' + document.location.protocol + '//' + window.document.location.hostname + port + '</div>')
                    </script>
        </footer>
        
            <script src='https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js'></script>
            
                <script>
                    
                    
                    loadlive2d();
                    
                    
                    getStar();
                    hljs.initHighlighting();
                    console.clear();
                    
                    CheckVersion();
                    
                    var newDate = new Date();
                    newDate.setTime(1600658333988);
                    console.log(" Blog Update Time: " + newDate.toLocaleDateString());
                    console.log("\n %c \u26a1Theme:Chic Author's Blog:https://blog.itjoker.cn  Write By ITJoker  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;");
                </script>
        </div>
</body>
<script>
    scroll();
</script>

</html>